<h1 id="h_01JCG9BEFAXZW6DMSGY13WGQBM">Overview</h1>
<p>Users may need to detect a list of emails delivered by EFS for PE surveys within a specific timeframe. This could be for various reasons such as post outage investigations. The problem arises when there is no direct query to fetch this information for all projects within an installation.</p>
<h1 id="h_01JCG9BEFA1VTK6Q11TCV0XX6Y">Solution</h1>
<p>To solve this problem, you can use a specific database query to extract the required information. </p>
<p>To build a new query, you can follow the steps in <a href="https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22010573804818#01JCG9JXDNCFNS692TPM6Z062J">DB Profiling</a>, or you can use the query below:</p>
<pre style="padding: 8px; font-family: SFMono-Regular, Consolas, ' Liberation Mono' , Menlo, Courier, monospace; font-size: 12.025px; color: #2f3941; border-radius: 4px; display: block; margin: 0px; line-height: inherit; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background: #ffffff; border: 1px solid #d8dcde; outline: 0px; vertical-align: baseline; box-sizing: border-box; margin-block: 4px 12px; margin-inline: 0px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><code style="font-family: SFMono-Regular, Consolas, ' Liberation Mono' , Menlo, Courier, monospace; font-size: 12px; color: #2f3941; border-radius: 0px; background: #ffffff; border: 0px; outline: 0px; vertical-align: baseline; box-sizing: border-box; line-height: inherit; white-space: pre-wrap; margin-block: 0px; margin-inline: 2px; padding-block: 0px; padding-inline: 5px; margin: 0px; padding: 0px;">SELECT m.sid, m.uid,p.mail_id, m.mail_to AS rcpt, 0 AS status, COALESCE(CONVERT_TZ(m.dt, 'UTC', 'UTC'),'0000-00-00 00:00:00') AS dt,  "" AS realStatus, p.delivery, p.pid <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">FROM mail_prot AS p <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">  JOIN mails AS m ON(p.mail_id=m.mail_id)   <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">  LEFT JOIN mail_rcpt AS r ON(m.mail_id=r.mail_id AND m.uid=r.uid) <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">WHERE   <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">  (m.delivery &amp; 1) <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">  AND COALESCE(CONVERT_TZ(FROM_UNIXTIME(m.dt), 'UTC', 'UTC'), '0000-00-00 00:00:00')  BETWEEN <strong>'2024-11-10 12:00:00' AND '2024-11-11 11:00:00'</strong> <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">  AND p.pid&gt;1 <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">UNION <br style="box-sizing: border-box; line-height: inherit; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">SELECT r.sid, r.uid,p.mail_id, IF(v.rcpt IS NULL, 0, v.rcpt) AS rcpt, r.status,