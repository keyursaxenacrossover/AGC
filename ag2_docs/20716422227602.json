{
    "id": 20716422227602,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20716422227602.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20716422227602-Azure-AD-Federation-Configuration",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20714711445138,
    "created_at": "2024-08-12T19:06:14Z",
    "updated_at": "2024-08-22T15:01:01Z",
    "name": "Azure AD Federation - Configuration",
    "title": "Azure AD Federation - Configuration",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-22T15:01:00Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<h1 id=\"h_01J5X9KCC9E6GEZYZCF3BGQW0S\">Table of Contents</h1>\n<ul>\n<li>\n<a href=\"#header-1\">Azure AD Configuration:</a>\n<ul>\n<li>\n<a href=\"#header-3\">Step 1: Create an App registration in Azure AD (tab App Registrations)</a>\n<ul>\n<li><a href=\"#header-5\">Step 2: Configure Supported Account types</a></li>\n<li><a href=\"#header-6\">Step 3: Add a redirect URI to the App Registration</a></li>\n<li><a href=\"#header-7\">Step 4: Add permission for “UserRead” to that App Registration</a></li>\n<li><a href=\"#header-8\">Step 5: Add optional claims to the manifest of the created App Registration in Azure AD.</a></li>\n<li><a href=\"#header-9\">Step 6: Create a secret for that App Registration and remember it</a></li>\n<li><a href=\"#header-10\">Step 7: Remember the client ID of that App Registration</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>An Azure Active Directory Federation should be setup as OpenID Connect federation. SAML might be possible but is not the preferred configuration.</p>\n<p>The following are tips for clients how to configure an Azure AD instance. This is just an experience report. The following will always be part of the clients infrastructure and we will not configure anything in there.</p>\n<p><strong>WHILE THIS IS PUBLISHED, WE NEED TO CONFIRM WITH TIVIAN THE VALIDITY OF THIS PROCESS, AS THE SOURCE OF THIS KNOWLEDGE DATES FROM 2020</strong></p>\n<h1 id=\"header-1\">Azure AD Configuration:</h1>\n<h3 id=\"header-3\">Step 1: Create an App registration in Azure AD (tab App Registrations)</h3>\n<h3 id=\"header-5\">Step 2: Configure Supported Account types</h3>\n<p>The value should be “Only Account from this AD” (single tenant)</p>\n<p>Also see <a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-convert-app-to-be-multi-tenant\">https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-convert-app-to-be-multi-tenant</a></p>\n<h3 id=\"header-6\">Step 3: Add a redirect URI to the App Registration</h3>\n<p>The redirect URI will be the following with a replacement for our okta domain: <a>https://&lt;our-okta-domain&gt;/oauth2/v1/authorize/callback</a></p>\n<p>For Production: <a href=\"https://access.questback.com/oauth2/v1/authorize/callback\">https://access.questback.com/oauth2/v1/authorize/callback</a></p>\n<h3 id=\"header-7\">Step 4: Add permission for “UserRead” to that App Registration</h3>\n<p>The value will be https://graph.microsoft.com/User.Read</p>\n<h3 id=\"header-8\">Step 5: Add optional claims to the manifest of the created App Registration in Azure AD.</h3>\n<p>The family_name and the given_name have to be sent.</p>\n<pre><code class=\"language-json\">\"optionalClaims\": {\n    \"idToken\": [\n        {\n            \"name\": \"family_name\",\n            \"essential\": true\n        },\n        {\n            \"name\": \"given_name\",\n            \"essential\": true\n        }\n    ]\n},\n\"accessToken\": [],\n\"saml2Token\": []</code></pre>\n<h3 id=\"header-9\">Step 6: Create a secret for that App Registration and remember it</h3>\n<h3 id=\"header-10\">Step 7: Remember the client ID of that App Registration</h3>",
    "user_segment_ids": [
        360000084973
    ]
}