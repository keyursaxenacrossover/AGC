{
    "id": 20714909302418,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20714909302418.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20714909302418-Migration-qb-tivian-access",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": true,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20714530860562,
    "created_at": "2024-08-12T17:05:45Z",
    "updated_at": "2024-08-12T17:05:47Z",
    "name": "Migration 'qb -> tivian access'",
    "title": "Migration 'qb -> tivian access'",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-12T17:05:47Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<p><b>Original Confluence URL:</b> <a href=\"https://qbdocs.atlassian.net/wiki/spaces/TS/pages/3857252353\">https://qbdocs.atlassian.net/wiki/spaces/TS/pages/3857252353</a> - please cross-check the quality of the ZD article with the Confluence counterpart and remove this line before publishing the ZD article</p>\n\n<p>Quick overview of the values that need to be changed when transitioning from \"questback.access\" to \"tivian.access\". For a detailed description, please visit <ac:link ac:card-appearance=\"inline\"><ri:page ri:content-title=\"EFS Admin Configuration\" ri:space-key=\"IAM\" ri:version-at-save=\"12\"></ri:page><ac:link-body>EFS Admin Configuration</ac:link-body></ac:link> </p><table data-layout=\"wide\" ac:local-id=\"c2f729bc-fb29-4504-b50f-cc7609cac994\">\n<ac:adf-fragment-mark><ac:adf-fragment-mark-detail local-id=\"fb85ae94-0895-4eb6-b69b-889bf960881e\" name=\"Table 1\"></ac:adf-fragment-mark-detail></ac:adf-fragment-mark><colgroup>\n<col style=\"width: 247.0px;\">\n<col style=\"width: 169.0px;\">\n<col style=\"width: 82.0px;\">\n<col style=\"width: 109.0px;\">\n<col style=\"width: 258.0px;\">\n</colgroup>\n<tbody>\n<tr>\n<th data-highlight-colour=\"#dbe3e8\"><p>VARIABLE NAME</p></th>\n<th data-highlight-colour=\"#dbe3e8\"><p>VARIABLE DEFINITION</p></th>\n<th data-highlight-colour=\"#dbe3e8\"><p><strong>CHANGE</strong></p></th>\n<th><p><strong>Same for all Installations per customer</strong></p></th>\n<th><p><strong>DESTINATION</strong></p></th>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_admin_bypass_login_route\"><u>iam_admin_bypass_login_route</u></a></p></td>\n<td><p>'/iam/admin/auth/login/bypass'</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_api_token\"><u>iam_api_token</u></a></p></td>\n<td><p>'00i6B1wE3eeECLJSSn8FSK4N025JJ7aAY5KrzaamDv'</p></td>\n<td><p>yes</p></td>\n<td><p>yes</p></td>\n<td><p>KeePass → MISC → Okta</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_audience\"><u>iam_audience</u></a></p></td>\n<td><p>'api://kantar'</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_client_group_id\"><u>iam_client_group_id</u></a></p></td>\n<td><p>'00g2jxwo198G2FExG417'</p></td>\n<td><p>yes</p></td>\n<td><p>no</p></td>\n<td><p>OKTA → Groups → Installationname Group (installation identifier)</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_client_id\"><u>iam_client_id</u></a></p></td>\n<td><p>'0oa2kkemrf90Gs9fI417'</p></td>\n<td><p>yes</p></td>\n<td><p>no</p></td>\n<td><p>OKTA → Applications → Installationname → Client ID</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_client_secret\"><u>iam_client_secret</u></a></p></td>\n<td><p>'Ym4MVCYotP8hUSa_MKBoNXc4K5Ju-5MlvYxmKx0e'</p></td>\n<td><p>yes</p></td>\n<td><p>no</p></td>\n<td><p>OKTA → Applications → Installationname → Client Secret</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_federated_domains\"><u>iam_federated_domains</u></a></p></td>\n<td><p>array ( 1 =&gt; '<a href=\"http://tivian.com\">http://tivian.com</a>  ', 2 =&gt; '<a href=\"http://questback.com\">http://questback.com</a>  ', 3 =&gt; '<a href=\"http://kantar.com\">http://kantar.com</a>  ', 4 =&gt; '<a href=\"http://kantarworldpanel.com\">http://kantarworldpanel.com</a>  ', )</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_idp_id\"><u>iam_idp_id</u></a></p></td>\n<td><p>''</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_module_active\"><u>iam_module_active</u></a></p></td>\n<td><p>true</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_panelist_sync\"><u>iam_panelist_sync</u></a></p></td>\n<td><p>'Deactivated'</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_post_logout_redirect_url\"><u>iam_post_logout_redirect_url</u></a></p></td>\n<td><p>'<a href=\"https://aw1673.customervoice360.com/iam/admin/auth/logoutSuccess\">https://aw1673.customervoice360.com/iam/admin/auth/logoutSuccess</a> '</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_proxy_url\"><u>iam_proxy_url</u></a></p></td>\n<td><p>'<a href=\"http://squid.global-services.svc.cluster.local:8080\">http://squid.global-services.svc.cluster.local:8080</a>'</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_redirect_url\"><u>iam_redirect_url</u></a></p></td>\n<td><p>'<a href=\"https://aw1673.customervoice360.com/iam/admin/auth/login\">https://aw1673.customervoice360.com/iam/admin/auth/login</a> '</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_show_error_as_json\"><u>iam_show_error_as_json</u></a></p></td>\n<td><p>false</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_sso_modules\"><u>iam_sso_modules</u></a></p></td>\n<td><p>array ( 0 =&gt; 'efs', )</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_unique_customer_name\"><u>iam_unique_customer_name</u></a></p></td>\n<td><p>'Kantar'</p></td>\n<td><p>no</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_user_group_id\"><u>iam_user_group_id</u></a></p></td>\n<td><p>'00g1488n0hEBkfl3n417'</p></td>\n<td><p>yes</p></td>\n<td><p>yes</p></td>\n<td><p>OKTA → Groups → Main Group for Customer (customer identifier)</p></td>\n</tr>\n<tr>\n<td><p><a href=\"https://aw1673.customervoice360.com/www/options.php?act=edit_config_var&amp;varName=iam_well_known_url\"><u>iam_well_known_url</u></a></p></td>\n<td><p>'<a href=\"https://access.questback.com/oauth2/aus1487ws4LLtrpN8417/.well-known/oauth-authorization-server\">https://access.questback.com/oauth2/aus1487ws4LLtrpN8417/.well-known/oauth-authorization-server</a>'</p></td>\n<td><p>yes</p></td>\n<td><p>yes</p></td>\n<td><p>OKTA → Security → API → Edit Customer Authorization Server → Metadata URL</p></td>\n</tr>\n</tbody>\n</table><ol start=\"1\">\n<li>\n<p>turn off module ‘IdentityAccessManager' </p>\n<pre><code class=\"language-text\">helpersEfsChangeConfig iam_module_active 0</code></pre>\n</li>\n<li>\n<p>swap values </p>\n<ol start=\"1\">\n<li>\n<p>manually or with helpersEfsChangeConfig script</p>\n<pre><code class=\"language-text\">helpersEfsChangeConfig iam_api_token [NEW VALUE -&gt; see KeePass for global customer token or create new with iam token user from KeePass]\nhelpersEfsChangeConfig iam_client_group_id 00g348q2uzU7nmIgY417\nhelpersEfsChangeConfig iam_client_id 0oa34n3lsm1b9KBX2417\nhelpersEfsChangeConfig iam_client_secret [NEW VALUE -&gt; see OKTA]\nhelpersEfsChangeConfig iam_user_group_id 00g2ku43q1jotSCdY417\nhelpersEfsChangeConfig iam_well_known_url https://access.tivian.com/oauth2/aus2kl4zjijopeKSC417/.well-known/oauth-authorization-server</code></pre>\n</li>\n<li><p>using iam_change_config_jsm.sh script</p></li>\n</ol>\n</li>\n<li><p>create backup of iam_user_reference table and truncate it</p></li>\n<li><p>run migration script <strong>[6] first</strong>, then [1] and [3]</p></li>\n<li><pre><code class=\"language-text\">php support/iam/migration.php\n\n[1] Admin user migration\n[2] Portal migration\n[3] Admin users activation\n[4] Portal ClientGroup migration\n[5] User ClientGroup migration\n[6] Convert admin user from questback.com to tivian.com domain\n[7] Convert panelists from questback.com to tivian.com domain\n[8] Portal update (e.g. update redirects after creation of new domain-alias)\n[9] Exit</code></pre></li>\n<li><p>update KeePass with (Client ID, Client Secret, Api Token)</p></li>\n</ol>",
    "user_segment_ids": [
        360000084973
    ]
}