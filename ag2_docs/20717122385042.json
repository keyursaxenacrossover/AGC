{
    "id": 20717122385042,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20717122385042.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20717122385042-Questback-Tivian-Domain-Migration-Steps",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": true,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20714711445138,
    "created_at": "2024-08-12T20:14:57Z",
    "updated_at": "2024-08-12T20:14:59Z",
    "name": "Questback - Tivian Domain Migration Steps",
    "title": "Questback - Tivian Domain Migration Steps",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-12T20:14:59Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<p><b>Original Confluence URL:</b> <a href=\"https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/3356065793\">https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/3356065793</a> - please cross-check the quality of the ZD article with the Confluence counterpart and remove this line before publishing the ZD article</p>\n\n<h2>Table of Contents</h2>\n<ul class=\"toc\">\n<ul>\n<li><a href=\"#header-1\">Setup General Settings new Okta Account</a></li>\n<ul>\n<li><a href=\"#header-3\">Client Migration</a></li>\n<ul>\n<li><a href=\"#header-5\">Okta Client Ressources</a></li>\n<ul>\n<li><a href=\"#header-7\">General (per tenant)</a></li>\n<li><a href=\"#header-8\">Application Specific (per application)</a></li>\n</ul>\n<li><a href=\"#header-10\">EFS (per installation)</a></li>\n<li><a href=\"#header-11\">User Migration (per installation)</a></li>\n</ul>\n<li><a href=\"#header-13\">What does the client have to do?</a></li>\n<ul>\n<li><a href=\"#header-15\">OIDC</a></li>\n<li><a href=\"#header-16\">SAML</a></li>\n<li><a href=\"#header-17\">Customer contacts (second contact → Cc)</a></li>\n</ul>\n</ul>\n</ul>\n</ul><h1 id=\"header-1\">Setup General Settings new Okta Account</h1><p>Do this once. Already done.</p><h2 id=\"header-3\">Client Migration</h2><h3 id=\"header-5\">Okta Client Ressources</h3><h4 id=\"header-7\">General (per tenant)</h4><p>Migrate general client resources</p><ul>\n<li><p>Password Policy</p></li>\n<li><p>Sign-On Policy</p></li>\n<li><p>Multi Factor enrollment</p></li>\n<li>\n<p>Identity Provider</p>\n<ul>\n<li><p>Provider itself</p></li>\n<li><p>Routing rules</p></li>\n</ul>\n</li>\n<li>\n<p>Groups</p>\n<ul><li><p>User Group (tenant specific)</p></li></ul>\n</li>\n</ul><p></p><h4 id=\"header-8\">Application Specific (per application)</h4><p>Migrate all client specific resources from the old Okta account to the new Okta account, these are:</p><ul>\n<li>\n<p>API</p>\n<ul>\n<li><p>Authorization Server</p></li>\n<li><p>Token</p></li>\n</ul>\n</li>\n<li>\n<p>Groups</p>\n<ul><li><p>Client Group (application specific)</p></li></ul>\n</li>\n<li><p>Application</p></li>\n</ul><p></p><h3 id=\"header-10\">EFS (per installation)</h3><p>Migrate EFS:</p><p>Change the values in EFS according to the values in the above section:</p><ul>\n<li><p>API Token</p></li>\n<li><p>Client Group ID</p></li>\n<li><p>Client ID (application)</p></li>\n<li><p>Client Secret (application)</p></li>\n<li><p>IdP ID (if set)</p></li>\n<li><p>User Group ID</p></li>\n<li><p>Well Known URL (authorization server)</p></li>\n<li><p>check if federated domains is still correct</p></li>\n<li><p>check that unique customer name still matches</p></li>\n</ul><p></p><h3 id=\"header-11\">User Migration (per installation)</h3><p>User Migration will happen with 2 initiatives:</p><ol start=\"1\">\n<li><p>A script that will migrate users respecting their status in Okta</p></li>\n<li><p>A service that will work as inline hook to migrate password as they arise</p></li>\n</ol><p>These ideas are depicted here:</p><p><a href=\"https://lucid.app/lucidchart/e73fec1a-434a-4f13-bc2d-069338808bf9/edit?from_docslist=true&amp;invitationId=inv_9139740a-bfdc-4a9f-8b39-076dbfd2d536&amp;page=qluAsnbQ95mN#\">https://lucid.app/lucidchart/e73fec1a-434a-4f13-bc2d-069338808bf9/edit?from_docslist=true&amp;invitationId=inv_9139740a-bfdc-4a9f-8b39-076dbfd2d536&amp;page=qluAsnbQ95mN#</a></p><h2 id=\"header-13\">What does the client have to do?</h2><p><strong>Provide a test user.</strong></p><p></p><h3 id=\"header-15\">OIDC</h3><p><strong>Azure AD (tested)</strong></p><p>Change the existing App Registration to accept more Redirect URIs.</p><p>The old Redirect URIs should stay the same and have to be kept for now.</p><p>Add new Redirect URIs for the new Okta account:</p><ul>\n<li><p><a href=\"https://tivian.okta.com/oauth2/v1/authorize/callback\">https://tivian.okta.com/oauth2/v1/authorize/callback</a> (general Okta domain)</p></li>\n<li><p><a href=\"https://access.tivian.com/oauth2/v1/authorize/callback\">https://access.tivian.com/oauth2/v1/authorize/callback</a> - (tivian okta domain - <u>this one is more important - the other one is a fallback</u>)</p></li>\n</ul><p></p><p><strong>Other (not tested)</strong></p><p>Do the same as above. If not possible create a second IdP connection to the new Okta account.</p><p></p><h3 id=\"header-16\">SAML</h3><p>Setup a new connection for the new client.</p><p>Keep both connections for the migration phase - the one for the new and the old Okta account.</p><p></p><h3 id=\"header-17\">Customer contacts (second contact → Cc)</h3><table data-layout=\"full-width\" ac:local-id=\"10bf24ec-ffd9-48d3-9351-cfda8ae10be8\">\n<colgroup>\n<col style=\"width: 98.0px;\">\n<col style=\"width: 233.0px;\">\n<col style=\"width: 113.0px;\">\n<col style=\"width: 67.0px;\">\n<col style=\"width: 67.0px;\">\n<col style=\"width: 67.0px;\">\n<col style=\"width: 67.0px;\">\n<col style=\"width: 83.0px;\">\n<col style=\"width: 85.0px;\">\n<col style=\"width: 78.0px;\">\n<col style=\"width: 80.0px;\">\n<col style=\"width: 81.0px;\">\n<col style=\"width: 212.0px;\">\n</colgroup>\n<tbody>\n<tr>\n<th><p><strong>customer</strong></p></th>\n<th><p><strong>contact customer</strong></p></th>\n<th><p><strong>accountant</strong></p></th>\n<th><p><strong>language</strong></p></th>\n<th><p><strong>IdP</strong></p></th>\n<th><p><strong>protocol</strong></p></th>\n<th><p><strong>user</strong></p></th>\n<th><p><strong>federated users</strong></p></th>\n<th><p><strong>active users</strong></p></th>\n<th><p><strong>pending users</strong></p></th>\n<th><p><strong>user in another state</strong></p></th>\n<th><p><strong>done</strong></p></th>\n<th><p><strong>reaction</strong></p></th>\n</tr>\n<tr>\n<td><p>Doka GmbH</p></td>\n<td><p><a href=\"mailto:rudolf.dornik@doka.com\">rudolf.dornik@doka.com</a>, <a href=\"mailto:heinz.plotzki@doka.com\">heinz.plotzki@doka.com</a></p></td>\n<td><p>Stefan Max</p></td>\n<td><p>german</p></td>\n<td><p>Azure AD</p></td>\n<td><p>OIDC</p></td>\n<td><p>59</p></td>\n<td><p>58</p></td>\n<td><p>0</p></td>\n<td><p>1</p></td>\n<td><p>5</p></td>\n<td><p>x</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>Hotelbeds</p></td>\n<td><p><a href=\"mailto:noam.brosh@hotelbeds.com\">noam.brosh@hotelbeds.com</a>, <a href=\"mailto:ltulleken@hotelbeds.com\">ltulleken@hotelbeds.com</a></p></td>\n<td><p><a href=\"mailto:Kartik.Shah@tivian.com\">Kartik.Shah@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>ADFS</p></td>\n<td><p>SAML</p></td>\n<td><p>3548</p></td>\n<td><p>3538</p></td>\n<td><p>8</p></td>\n<td><p>2</p></td>\n<td><p>0</p></td>\n<td><p>-</p></td>\n<td><p>-</p></td>\n</tr>\n<tr>\n<td><p>Intervista</p></td>\n<td><p><a href=\"mailto:christoph.wuethrich@intervista.ch\">christoph.wuethrich@intervista.ch</a></p></td>\n<td><p>matthias.fertig@tivian.com</p></td>\n<td><p>german</p></td>\n<td><p>Azure AD</p></td>\n<td><p>OIDC</p></td>\n<td><p>106</p></td>\n<td><p>72</p></td>\n<td><p>11</p></td>\n<td><p>24</p></td>\n<td><p>0</p></td>\n<td><p>x</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>John Lewis Partnership</p></td>\n<td><p><a href=\"mailto:rebecca.colleran@johnlewis.co.uk\">rebecca.colleran@johnlewis.co.uk</a></p></td>\n<td><p><a href=\"mailto:Ionut.Macovei@tivian.com\">Ionut.Macovei@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>custom</p></td>\n<td><p>SAML</p></td>\n<td><p>84370</p></td>\n<td><p>22016</p></td>\n<td><p>392</p></td>\n<td><p>48854</p></td>\n<td><p>13109</p></td>\n<td><p>-</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>Kantar GmbH</p></td>\n<td><p><a href=\"mailto:Tony.fitzpatrick@kantar.com\">Tony.fitzpatrick@kantar.com</a></p></td>\n<td><p><a href=\"mailto:Alex.Hall@tivian.com\">Alex.Hall@tivian.com</a>, <a href=\"mailto:Cristabelle.Metcalfe@tivian.com\">Cristabelle.Metcalfe@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>Azure AD</p></td>\n<td><p>SAML</p></td>\n<td><p>614</p></td>\n<td><p>560</p></td>\n<td><p>145</p></td>\n<td><p>307</p></td>\n<td><p>1</p></td>\n<td><p>x</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>NPR</p></td>\n<td><p><a href=\"mailto:hnguyen@npr.org\">hnguyen@npr.org</a></p></td>\n<td><p><a href=\"mailto:Ionut.Macovei@tivian.com\">Ionut.Macovei@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>custom</p></td>\n<td><p>SAML</p></td>\n<td><p>50</p></td>\n<td><p>32</p></td>\n<td><p>1</p></td>\n<td><p>17</p></td>\n<td><p>0</p></td>\n<td><p>-</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>RAG AG</p></td>\n<td><p><a href=\"mailto:Sascha.Liesner@rag.de\">Sascha.Liesner@rag.de</a>, <a href=\"mailto:dirk.bergmann@rag.de\">dirk.bergmann@rag.de</a></p></td>\n<td><p>Gabriela Schwentke</p></td>\n<td><p>german</p></td>\n<td><p>Azure AD</p></td>\n<td><p>OIDC</p></td>\n<td><p>49</p></td>\n<td><p>44</p></td>\n<td><p>2</p></td>\n<td><p>3</p></td>\n<td><p>0</p></td>\n<td><p>x</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>Schaeffler</p></td>\n<td><p><a href=\"mailto:dresejli@schaeffler.com\">dresejli@schaeffler.com</a></p></td>\n<td><p>Stefan Max</p></td>\n<td><p>german</p></td>\n<td><p>Azure AD</p></td>\n<td><p>SAML</p></td>\n<td><p>125864</p></td>\n<td><p>71315</p></td>\n<td><p>7</p></td>\n<td><p>55056</p></td>\n<td><p>0</p></td>\n<td><p>-</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>Touchstone</p></td>\n<td>\n<p><a href=\"mailto:Travis@touchstoneresearch.com\">Travis@touchstoneresearch.com</a>,</p>\n<p><a href=\"mailto:ben@transform.technology\">ben@transform.technology</a></p>\n</td>\n<td><p><a href=\"mailto:Ionut.Macovei@tivian.com\">Ionut.Macovei@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>Jumpcloud</p></td>\n<td><p>SAML</p></td>\n<td><p>89</p></td>\n<td><p>66</p></td>\n<td><p>11</p></td>\n<td><p>14</p></td>\n<td><p>1</p></td>\n<td><p>-</p></td>\n<td><p>x</p></td>\n</tr>\n<tr>\n<td><p>ZF</p></td>\n<td><p><a href=\"mailto:beate.strittmatter@zf.com\">beate.strittmatter@zf.com</a></p></td>\n<td><p><a href=\"mailto:Cristabelle.Metcalfe@tivian.com\">Cristabelle.Metcalfe@tivian.com</a></p></td>\n<td><p>english</p></td>\n<td><p>Azure AD</p></td>\n<td><p>OIDC</p></td>\n<td><p>71773</p></td>\n<td><p>71631</p></td>\n<td><p>7</p></td>\n<td><p>136</p></td>\n<td><p>0</p></td>\n<td><p>-</p></td>\n<td><p>x</p></td>\n</tr>\n</tbody>\n</table>",
    "user_segment_ids": [
        360000084973
    ]
}