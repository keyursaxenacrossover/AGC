{
    "id": 20714558954386,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20714558954386.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20714558954386-PDF-Receipt",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": true,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20714530860562,
    "created_at": "2024-08-12T16:48:49Z",
    "updated_at": "2024-08-12T16:48:51Z",
    "name": "PDF Receipt",
    "title": "PDF Receipt",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-12T16:48:51Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<p><b>Original Confluence URL:</b> <a href=\"https://qbdocs.atlassian.net/wiki/spaces/TS/pages/1054867866\">https://qbdocs.atlassian.net/wiki/spaces/TS/pages/1054867866</a> - please cross-check the quality of the ZD article with the Confluence counterpart and remove this line before publishing the ZD article</p>\n\n<h2>Table of Contents</h2>\n<ul class=\"toc\">\n<ul>\n<li><a href=\"#header-1\">How to activate the \"receipt\" module?</a></li>\n<ul>\n<li><a href=\"#header-3\">How to configure the receipts?</a></li>\n<ul>\n<li><a href=\"#header-5\">General information</a></li>\n<li><a href=\"#header-6\">How do you regenerate a pdf receipt?</a></li>\n<li><a href=\"#header-7\">Hintergrund</a></li>\n<li><a href=\"#header-8\">Notwendige Schritte</a></li>\n<li><a href=\"#header-9\">Häufige Fehlerursachen</a></li>\n</ul>\n</ul>\n</ul>\n</ul><h1 id=\"header-1\">How to activate the \"receipt\" module?</h1><p></p><ul>\n<li><p>Add the module \"receipt\" to the config.</p></li>\n<li><p>execute healself</p></li>\n</ul><p>In 8.0 and higher</p><ul><li><p>only activate <strong>receipt</strong> in config</p></li></ul><p>The customers aren't allowed to see the receipt admin GUI. There is a special config flag called $__has_receipt_admin and this should remain false. QuestBack<a href=\"https://it.globalpark.de/twiki/bin/edit/Support/QuestBack?topicparent=Support.PDFQuittungenAllg\">?</a> user can always see the receipts. The only exception at the moment is Kingsley and it shouldn't be activated anywhere else!</p><div class=\"expand-macro\">\n<h4 string=\"in 7.0\"></h4>\n<ul>\n<li><p>checkout <strong>receipt</strong> and <strong>receipt_admin</strong> under <strong>modules</strong></p></li>\n<li><p>cvs -d <a>:pserver:gpinst@cvs.3uu.de</a>:/vol/cvs co -r SIEBEN-0 modules/receipt</p></li>\n<li><p>cvs -d <a>:pserver:gpinst@cvs.3uu.de</a>:/vol/cvs co -r SIEBEN-0 modules/receipt_admin</p></li>\n</ul>\n</div><div class=\"expand-macro\">\n<h4 string=\"in 6.0\"></h4>\n<ul>\n<li><p>checkout <strong>receipt</strong> and <strong>receipt_admin</strong> under <strong>modules</strong></p></li>\n<li><p>cvs -d <a>:pserver:gpinst@cvs.3uu.de</a>:/vol/cvs co -r SECHS-0 modules/receipt</p></li>\n<li><p>cvs -d <a>:pserver:gpinst@cvs.3uu.de</a>:/vol/cvs co -r SECHS-0 modules/receipt_admin</p></li>\n</ul>\n</div><h2 id=\"header-3\">How to configure the receipts?</h2><p> On the EFS start page there is a button called \"receipt admin\". When you click on the button you'll see all the existing projects with the standard layout. To activate a receipt for a certain project, find the corresponding project in the list and click on the PDF symbol. There you can configure a few options like which pages to hide, the watermark, etc. for more detailed customisation you need to change files directly in the installation and the project.</p><p><strong>German Version:</strong> <br>Auf der EFS Startseite gibt es den Menüpunkt \"Quittungen Verwaltung\", dort findet man alle existierenden Projekte. Um für ein Projekt die Quittungen zu aktivieren sucht man dsa Projekt und erzeugt die PDF Quittung indem man auf das PDF Symbol klickt. Dort können weitere rudimentäre Einstellungen vorgenommen werden. Möchte man z.B. das alle Fragen angezeigt werden, wählt man einfach keine aus. Bei Watermark kann man wohl ein PDF mit dem Firmenlogo etc. hochladen, für mehr customizing muss man auf die Console gehen.</p><h3 id=\"header-5\">General information</h3><p><strong>Responsive Layout</strong> <br>The module now does support responsive layout projects, too.</p><p><strong>Location</strong> <br>You find the receipts in uc/receipts/xxx (xxx = pid). In \"images\" you can customize the design. Changes on the spacing can be configured in pdfquittung.tex.</p><p><strong>How to integrate?</strong> <br>The participant can get the receipt at the end of the questionnaire and on the last page. You have to copy the link you find on top of the receipt admin UI to the endpage of the survey. For personalized surveys you can use the SESSION or the CODE. For anonymous surveys you only have the SESSION option. For example: <a href=\"http://www.example.com/uc/super_project/get_survey_pdf.php?code=#code#\">www.example.com/uc/super_project/get_survey_pdf.php?code=#code#</a> <br>You can even use the link to regenerate the receipt. Find a \"How To\" further below.</p><p><strong>GERMAN VERSION</strong> <br>Damit der Teilnehmer seine Quittung am Ende des Fragebogens erhält, nimmt man im Projekt unter Quittungsverwaltung die Links und bettet diese auf die Endseite. Dies geht problemlos bei PE Umfragen. Wenn man sich den Link notiert, können auch nachträglich die Quittungen runtergeladen werden. Bei Anonymen Projekten muss man sich die Session aus der Datenbank selektieren.</p><p><strong>Changing the layout of the HTML receipt</strong> <br>If the HTML receipt has been activated for a project, you can navigate to the project and into the Layout &gt;&gt; Pro Editor and can edit template <strong>page_main_receipt.tpl</strong> (Responsive Layout 2).<br>The HTML receipt uses this template for output (RL2 only). The template is created whenever a new (RL2) project is created.<br>Another template called <strong>receipt.tpl</strong> might be created when activating the receipt functionality for a project but it will not be used in RL2 (see <a href=\"https://jira.3uu.de/browse/KANBAN-11560\">KANBAN-11560</a>)</p><p></p><h3 id=\"header-6\">How do you regenerate a pdf receipt?</h3><p></p><ul>\n<li><p>Die page_history prüfen</p></li>\n<li><p>unter uc/receipt/xxx (xxx=pid) prüfen, ob das PDF erzeugt wurde (wird nach uid angezeigt)</p></li>\n<li><p>sollte es fehlerhaft sein, noch mal die Generierung anstoßen</p></li>\n<li><p>Umfragelink/get_survey_pdf.php?session_id=#session_id# (bei PE geht auch Code) ausfüllen. Session Id bekommt man bei anonymen Projekten in der survey_xxx_1 und lfdn bei \"session_id\"</p></li>\n<li><p>dann funktioniert die Generierung nicht, aber ein PDF wie <strong>77b7df0ba0.pdf</strong> wird erzeugt und meistens in das ausreichend</p></li>\n<li><p>kurz überprüfen ob der Report okay aussieht und wichtige Daten fehlen</p></li>\n<li><p>die PDF Datei dem Kunden schicken</p></li>\n</ul><p>oder</p><div class=\"expand-macro\">\n<h4 string=\"recreate receipt, where creation failed\"></h4>\n<h3 id=\"header-7\">Hintergrund</h3>\n<ul>\n<li><p><strong>Kunde:</strong> Deloitte</p></li>\n<li><p><strong>Installation:</strong> <a href=\"http://www.umfragen-deloitte.de/www/\">http://www.umfragen-deloitte.de/www/</a></p></li>\n<li><p>Der Kunde lässt für diverse Umfragen PDF Quittungen erzeugen. Manchmal schlägt das Erzeugen der Quittungen fehl,<br>da Teilnehmereingaben die Formatierungen oder den Code der Quittung zerschießen.<br>Die entsprechende Quittung muss dann erneut erzeugt und ggf. vorher debuggt und Probleme behoben werden.</p></li>\n</ul>\n<h3 id=\"header-8\">Notwendige Schritte</h3>\n<ul>\n<li><p>über die Konsole auf dem jeweiligen Server einloggen (z.B. Bremen)</p></li>\n<li><p>ins Verzeichnis der Installation gehen (z.B. <strong>cd /nfs/opst4/www.umfragen-deloitte.de/htdocs</strong>)</p></li>\n<li><p>ins Verzeichnis für die Quittungen gehen (<strong>cd uc/receipts/</strong>)</p></li>\n<li><p>das entsprechende Projektverzeichnis aufrufen (z.B. <strong>cd 1234</strong>)</p></li>\n<li><p>alle Quittungen anzeigen (<strong>ll *.tex</strong>)</p></li>\n<li><p>die entsprechende Quittung heraussuchen, z.B. anhand des Datums, an dem der Teilnehmer teilgenommen hat (z.B. <strong>1b2d341396.tex</strong>)</p></li>\n<li><p>Quittung neu generieren (<strong>pdflatex 1b2d341396.tex</strong>)</p></li>\n<li><p>beim Erzeugen aufgetretene Fehler werden angezeigt</p></li>\n</ul>\n<pre><code class=\"language-text\">[...]\n\nl.289   [\"info\"]\n                =&gt;\n[...]\n?\n</code></pre>\n<ul>\n<li><p><strong>l.289</strong> gibt die Zeile aus, in der Fehler aufgetreten sind (-&gt; Zeile 289 )</p></li>\n<li><p>Über die Eingabe von <strong>q</strong> kann die Erzeugung abgebrochen werden</p></li>\n<li>\n<p>entsprechende Zeile in der Datei ansehen und gefundene Probleme beheben (<strong>vi 1b2d341396.tex</strong>)</p>\n<ul><li>\n<p>gefundene Probleme können sein:</p>\n<ul>\n<li><p>Eingaben des Teilnehmers enthalten Steuerzeichen (z.B. &amp;), diese müssen escaped werden (z.B. \\&amp;)</p></li>\n<li><p>Code der Quittung selber enthält fehlerhafte Zeichen oder es fehlen Zeichen (z.B. &amp; &amp; kann durch &amp; ~ &amp; ersetzt werden (~ steht für non breaking space))</p></li>\n</ul>\n</li></ul>\n</li>\n<li>\n<p>nach Behebung der Probleme, Quittung erneut generieren (<strong>pdflatex 1b2d341396.tex</strong>)</p>\n<ul>\n<li>\n<p>werden keine weiteren Fehler gefunden, kann die Quittung heruntergeladen und dem Kunden zugesendet werden</p>\n<ul><li><p>Quittung befindet sich im gleichen Ordner (<strong>uc/receipts/1234</strong>) mit gleichem Namen (<strong>1b2d341396.pdf</strong>)</p></li></ul>\n</li>\n<li><p>werden weitere Fehler gefunden, diese wie oben beschrieben beheben</p></li>\n</ul>\n</li>\n</ul>\n</div><h3 id=\"header-9\">Häufige Fehlerursachen</h3><p>In der Log Datei unter uc/receipt/xxx (xxx=pid) kann man die letzten Zeilen anschauen und bekommt vielleicht eine klare Fehlermeldung.</p><p>Offene Textfelder mit Sonderzeichen die vom Teilnehmer eingegeben wurden z.B. &amp;, %, ... (bitte ergänzen)</p>",
    "user_segment_ids": [
        360000084973
    ]
}