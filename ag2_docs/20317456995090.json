{
    "id": 20317456995090,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20317456995090.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20317456995090-Date-calculations-in-EFS",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20234751255186,
    "created_at": "2024-07-23T08:45:54Z",
    "updated_at": "2024-07-26T09:12:17Z",
    "name": "Date calculations in EFS",
    "title": "Date calculations in EFS",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-07-26T09:12:02Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<p><span style=\"font-size: 2.1em;\">Overview</span></p>\n<article>\n<p>This article covers date calculations in EFS (Enterprise Feedback Suite), focusing on working with dates in MySQL and EFS. It includes information on calculating date differences, determining exact age, and choosing the appropriate date format for calculations and filters.</p>\n<h1 id=\"h_01HGKSMPRSYYE7GMM7DZ0VCKXK\">Information</h1>\n<p>This guide provides detailed explanations and examples for performing date-related operations in EFS, including using MySQL functions and handling different date formats.</p>\n<ul>\n<li><a href=\"#date_difference\">Calculating Date Differences with DATEDIFF</a></li>\n<li><a href=\"#exact_age\">Calculating Exact Age</a></li>\n<li><a href=\"#date_format\">Choosing the Right Date Format for Calculations</a></li>\n</ul>\n<h2 id=\"date_difference\">Calculating Date Differences with DATEDIFF</h2>\n<p>When calculating date differences in EFS using MySQL's DATEDIFF function, it's important to use the correct date format and functions.</p>\n<h3 id=\"h_01J3Q47RPKKH7P8WZ94P2T6WXD\">Using DATEDIFF with NOW() and a Date Value</h3>\n<p>MySQL requires dates in the format \"YYYY-MM-DD\" for the DATEDIFF function. If your date is in a different format (e.g., \"DD.MM.YYYY\"), you'll need to convert it first.</p>\n<h3 id=\"h_01J3Q47RPKH4MSDSAYAG4Z2EM8\">Converting Date Formats</h3>\n<p>Use the STR_TO_DATE function to convert dates from \"DD.MM.YYYY\" format to a MySQL-compatible format:</p>\n<pre><code>DATEDIFF(STR_TO_DATE(#u_projektende#, \"%d.%m.%Y\"), #c_0001#)</code></pre>\n<h3 id=\"h_01J3Q47RPKD5QE91ENBZVK0YHP\">Adding Time Intervals</h3>\n<p>To add time intervals to dates, use the TIMESTAMPADD function:</p>\n<pre><code></code>TIMESTAMPADD(DAY, 1, NOW()) #Here you can define what (e.g. DAY, WEEK etc.) you want to add to Z</pre>\n<p>Note: Using MySQL functions in recoding triggers is an undocumented feature in EFS, and not all functions may be available.</p>\n<h2 id=\"exact_age\">Calculating Exact Age</h2>\n<p>To calculate a person's exact age based on their birth date, use the following formula in a recoding trigger:</p>\n<pre>DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT('#v_1#', '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') &lt; D DATE_FORMAT('#v_1#', '00-%m-%d')) </pre>\n<p>This formula accounts for whether the birthday has occurred in the current year.</p>\n<p><strong>Explanation:</strong></p>\n<ul>\n<li>The first part determines the current year '%Y' from now(), and subtracts the year from v_1<br><code>DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT('#v_1#', '%Y')</code><br>\n<ul>\n<li>This can be 1 too high if there has not been a birthday in the current year.</li>\n</ul>\n</li>\n<li>The second part checks whether the month and day in the current year are smaller than the month and day of the birthday, if true, then it returns a 1, this is then subtracted from the provisional age from the calculation in the first part and thus the age is corrected by 1 downwards, if wrong, then a zero that would have no effect. (Truth values! 1 true, 0 false)<br><code>- (DATE_FORMAT(NOW(), '00-%m-%d') &lt; DATE_FORMAT('#v_1#', '00-%m-%d'))</code>\n</li>\n</ul>\n<h2 id=\"date_format\">Choosing the Right Date Format for Calculations</h2>\n<p>When working with dates in EFS filters, conditions, or calculations, it's important to use a format that EFS can interpret as numbers. For EFS, 16.06.2023 or 2023- 06-16 or 16/06/2023 is just a string.</p>\n<h3 id=\"h_01J3Q47RPKP1GMZJZBWT8Y6HER\">Unix Timestamps</h3>\n<p>Unix timestamps can be used but are not easily readable:</p>\n<ul>\n<li>2023-06-16 00:00:00 → 1686873600</li>\n<li>2023-06-16 23:59:59 → 1686959999</li>\n</ul>\n<h3 id=\"h_01J3Q47RPK7VDZYFYE0F24BK46\">YYYYMMDD or YYYYMMDDhhmmss Format</h3>\n<p>A more readable alternative is to use YYYYMMDD or YYYYMMDDhhmmss format:</p>\n<ul>\n<li>2023-06-16 00:00:00 → 20230616000000</li>\n<li>2023-06-16 23:59:59 → 20230616235959</li>\n</ul>\n<p><strong>Example filter condition:</strong></p>\n<pre>u_date &gt;= 20230616000000 AND u_date &lt;= 20230616235959</pre>\n<p>For date-only format:</p>\n<pre>u_date &gt; 20230615 AND u_date &lt; 20230617</pre>\n<p>Note: The participant variable must be of type \"Text field\" when using these formats.</p>\n<p> </p>\n<h1 id=\"h_01HGKSMPRSER9ENY5QWWRZZ863\">FAQ</h1>\n<h3 id=\"faq_1\">How do I handle different date formats in EFS?</h3>\n<p>Use the STR_TO_DATE function to convert dates from various formats to a MySQL-compatible format. For example: STR_TO_DATE(#date_variable#, \"%d.%m.%Y\") converts from DD.MM.YYYY format.</p>\n<h3 id=\"faq_2\">Can I use all MySQL date functions in EFS?</h3>\n<p>Not all MySQL functions are available in EFS recoding triggers. It's an undocumented feature, so some functions may not work as expected. Test your calculations thoroughly.</p>\n<h3 id=\"faq_3\">What's the best date format for EFS filters and calculations?</h3>\n<p>For readability and ease of use, the YYYYMMDD or YYYYMMDDhhmmss format is recommended. This allows for simple numeric comparisons in filters and calculations while remaining human-readable.</p>\n</article>",
    "user_segment_ids": [
        360000084973
    ]
}