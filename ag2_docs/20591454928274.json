{
    "id": 20591454928274,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20591454928274.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20591454928274-Email-Sending-Architecture-in-EFS",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20234751255186,
    "created_at": "2024-08-06T09:47:29Z",
    "updated_at": "2024-08-06T11:10:58Z",
    "name": "Email Sending Architecture in EFS",
    "title": "Email Sending Architecture in EFS",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-06T10:46:50Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<h1 id=\"h_01J4KMQEY0F9NFDBA0Y6FG7KTK\">Overview</h1>\n<p>An important feature of EFS is to send emails. There are different features that send emails like survey participation, security emails etc.</p>\n<p>On this page snailmail and jobmaker are part of the EFS software. This is not entirely true from a deployment perspective but good enough for this page.</p>\n<h1 id=\"h_01J4KMR8TSGQZWE619YVTKGC0B\">Information</h1>\n<p>From a top-level view the picture below shows how email sending works.</p>\n<p><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20591455212690\" alt=\"Runtime View - EMail(2).png\"></p>\n<ul>\n<li>\n<p><strong>EFS software</strong></p>\n<ul>\n<li>\n<p>creates email from templates and puts them in an email table</p>\n</li>\n<li>\n<p>next to that an email procedure is created in another table - one procedure can have multiple emails</p>\n</li>\n<li>\n<p>the templates are filled when sending forwarding emails to the email server</p>\n</li>\n<li>\n<p>there are two mechanism to actually send emails:</p>\n<ul>\n<li>\n<p>ad-hoc: An email is sent directly when sending is triggered</p>\n</li>\n<li>\n<p>snailmail: Emails are put in the email table and processed by a cron-job called snailmail that periodically loads un-sent emails and forwards them to the email server</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Email server - Postfix</strong></p>\n<ul>\n<li>\n<p>the postfix is used as a cache/queue for the Hurricane</p>\n</li>\n<li>\n<p>it simply forwads emails</p>\n</li>\n<li>\n<p>this is done due to availability reasons with regards to the Hurricane and a VPN connection</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Hurricane MTA</strong></p>\n<ul>\n<li>\n<p>this on premise solution is the actual email transfer server that sends the emails to the respective recipients</p>\n</li>\n<li>\n<p>a callback is configured that is requested when the status of an email that should be sent changes</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Tracking Service</strong></p>\n<ul>\n<li>\n<p>the tracking service is the recipient of the callback in Hurricane</p>\n</li>\n<li>\n<p>it pushed changes in the email status to a RabbitMQ</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Tracking Queue</strong></p>\n<ul>\n<li>\n<p>The Tracking Queue (RabbitMQ) serves as a publish/subscribe mechanism for notifications</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>EFS software</strong></p>\n<ul>\n<li>\n<p>The cron-job Jobmaker of EFS has a task/job that periodically reads notifications from the Tracking Queue and adapts the email status accordingly</p>\n</li>\n</ul>\n</li>\n</ul>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>",
    "user_segment_ids": [
        360000084973
    ]
}