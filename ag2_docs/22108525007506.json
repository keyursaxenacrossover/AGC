{
    "id": 22108525007506,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/22108525007506.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22108525007506-Troubleshooting-Sporadic-Performance-Issues",
    "author_id": 1904316023094,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20389541164690,
    "created_at": "2024-10-21T12:03:53Z",
    "updated_at": "2024-10-21T13:55:01Z",
    "name": "Troubleshooting Sporadic Performance Issues",
    "title": "Troubleshooting Sporadic Performance Issues",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-10-21T13:55:01Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [
        "Troubleshooting",
        "DXI",
        "Performance Issues"
    ],
    "body": "<h1 id=\"h_01JAQFHNGMHBNQNRZ672S1W3ZB\">Overview</h1>\n<p>Performance issues in DXI may stem from various factors such as queries with long processing times, errors in the CW log, a high volume of Group Update Rules, or infrastructure-related issues visible in tools like Grafana.</p>\n<p>These performance problems may also be tied to frequent resource starvation leading to increased replicas (FPMPOOL PHP level replica) and aborted connections, possibly due to periodic processes (such as cron jobs) or database pressure from high traffic and resource usage.</p>\n<p>This troubleshooting guide will help support agents systematically diagnose and resolve sporadic performance issues by addressing the following areas:</p>\n<hr>\n<h1 id=\"h_01JAQG6WKNQ2T443KG3WWV71H5\">Solution:</h1>\n<h2 id=\"h_01JAQG6WKNTEY0KZ8TWV3F7G2Z\">1. <strong>Check Connections/Survey Pages with Long Processing Times</strong>\n</h2>\n<ol>\n<li>\n<h3 id=\"h_01JAQHQ0SNXGX2RPEH2Y97NCPF\"><span class=\"wysiwyg-underline\">For Admin actions:</span></h3>\n<ul>\n<li>\n<span style=\"color: #e83e8c; font-family: SFMono-Regular, Menlo, Monaco, Consolas, ' Liberation Mono' , ' Courier New' , monospace; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: #f7f7f7; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">System &gt;&gt; Options &gt;&gt; Patform cockpit &gt;&gt; Admin Log</span><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22110289170962\">\n</li>\n<li>Get the Connection ID and use it to query AWS logs.</li>\n</ul>\n</li>\n<li>\n<h3 id=\"h_01JAQJNQF13WV966M2VTYPXADX\"><span class=\"wysiwyg-underline\">For Slow Survey performance in general (not for an individual):</span></h3>\n<ul>\n<li><span style=\"color: #e83e8c; font-family: SFMono-Regular, Menlo, Monaco, Consolas, ' Liberation Mono' , ' Courier New' , monospace; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: #f7f7f7; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">System &gt;&gt; Options &gt;&gt; Patform cockpit &gt;&gt; System &gt;&gt; Options &gt;&gt; Patform cockpit &gt;&gt;OSPE Watchdog<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22110289175314\"><br></span></li>\n<li>The most important column is \"Ø Exec. time\" if  &gt; 2s it is to be considered slow.</li>\n<li>For everything below that, even if the column \"Max. exec. time\" shows very high values, it is to be considered \"ok\" and the highest may be a single participation but not the survey in general.</li>\n<li>If you click on any project in the column of the same name you see the very same but for the single pages of a survey, which helps you to identify specific pages which perform slow.<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22110342209810\">\n</li>\n<li>Next thing would be to check those pages in the survey editor to see if their are \"<strong>Triggers</strong>\" on that page which might cause issues or other performance intense things (i.e. LUA question type, customizings etc.)</li>\n</ul>\n</li>\n<li>\n<h3 id=\"h_01JAQJP5TM2YXJHPGWREDPAJWM\"><span class=\"wysiwyg-underline\">For Survey Individual-Reply performance:</span></h3>\n<ul>\n<li style=\"box-sizing: border-box;\">\n<strong style=\"box-sizing: border-box; font-weight: bolder;\">Watchdog (ospe_time_log Table):</strong>\n<ul style=\"box-sizing: border-box; list-style: outside disc; margin: 0px; padding: 0px 0px 0px 20px;\">\n<li style=\"box-sizing: border-box;\">The Watchdog (<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, ' Liberation Mono' , ' Courier New' , monospace; font-size: 14px; color: #e83e8c; word-break: break-word; background: #f7f7f7; border: 1px solid #dddddd; border-radius: 3px; padding: 0px 5px; margin: 0px 2px;\">System &gt;&gt; Options &gt;&gt; Patform cockpit &gt;&gt; OSPE Watchdog</code>) is based on the DB table <strong style=\"box-sizing: border-box; font-weight: bolder;\">ospe_time_log</strong> which provides the performance stats for each participant for <strong style=\"box-sizing: border-box; font-weight: bolder;\">each sent page</strong>. Here you can get the user ID (uid) and <strong style=\"box-sizing: border-box; font-weight: bolder;\">timestamp</strong> of each request if you would like to look at the DB log in AWS CW <br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22110342211986\">\n</li>\n</ul>\n</li>\n<li>You also could look for the <strong>survey</strong> table and the lfdn of user (if the customer provided an example participant), then limit the <strong style=\"box-sizing: border-box; font-weight: bolder;\">Watchdog </strong>table by \"<strong>date_of_fist_access</strong>\" and \"<strong>date_of_last_access</strong>\"</li>\n<li>Eventually, you can get the connection ID using the timestamp and/or uid from AWS CW..</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"h_01JAQG6WKN5A4JSQEXDGAYG0BG\">2. <strong>Check DB Logs on AWS Cloudwatch</strong>\n</h2>\n<ul>\n<li>Review <a href=\"https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22010573804818-Accessing-and-Querying-AWS-Cloudwatch-DB-Logs\">Accessing and Querying AWS Cloudwatch DB Logs</a> for general guidance for AWS logs.</li>\n<li>Look for Aborted connections in error log group</li>\n<li>Check <strong>slowqueries</strong> log group for individual slow queries (remember that a single connection has lot of queries).<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22111304671122\"><br>\n<ul>\n<li>\n<strong>Thread_id</strong>: is the connection ID</li>\n<li>\n<strong>Query_time</strong>: is in milliseconds.</li>\n</ul>\n</li>\n<li>For Survey related issues, <a href=\"https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22090185803410#h_01JAMY3QTZY2V3E78R7QGJR831\">Check AWS DB Logs for survey related requests</a>\n</li>\n<li>For Cronjobs issues (<strong>JobMaker</strong>), you can <a href=\"https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22010573804818#h_01JAAEY10EJEV935RGPXW3THD8\">Monitor JobMaker progress for an installation</a>\n</li>\n</ul>\n<h2 id=\"h_01JAQG6WKN0X1WBMYKHZD3DXKP\">3. <strong>Check Grafana for Performance Metrics</strong>\n</h2>\n<ul>\n<li>Review <a href=\"https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/21741183591314-Accessing-and-Querying-Grafana-Logs-A-Comprehensive-Guide\">Accessing-and-Querying-Grafana-Logs</a> for general guidance for Grafana.</li>\n<li>Check performance of Cronjobs:<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22111304680850\">\n</li>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Checking HPA pool section in the same page (for horizontal scaling)<br style=\"box-sizing: border-box; line-height: inherit;\"><span style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; line-height: inherit; opacity: 1;\"><img style=\"vertical-align: baseline; border: 0px; margin: 0px; padding: 0px; outline: 0px; background: transparent; box-sizing: border-box; line-height: inherit; object-fit: scale-down; aspect-ratio: auto; inline-size: auto; max-block-size: 75dvb; block-size: auto; max-width: 100%; max-inline-size: 100%;\" src=\"https://central-supportdesk.zendesk.com/attachments/token/2T7e0OY2vI4RWfxQGsz4zaQCD/?name=image.png\"></span>\n<ul>\n<li>Comparing this to a normal prod installation<br style=\"box-sizing: border-box; line-height: inherit;\"><span style=\"margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; line-height: inherit; opacity: 1;\"><img style=\"vertical-align: baseline; border: 0px; margin: 0px; padding: 0px; outline: 0px; background: transparent; box-sizing: border-box; line-height: inherit; object-fit: scale-down; aspect-ratio: auto; inline-size: auto; max-block-size: 75dvb; block-size: auto; max-width: 100%; max-inline-size: 100%;\" src=\"https://central-supportdesk.zendesk.com/attachments/token/6PpENWKe3OC0D5goYLb6wpSEh/?name=image.png\"></span>\n</li>\n<li>In the above example, seems there is a frequent resources starvation, approx every hour (maybe due to a cron), causing the replicas to increase every hour, which might be the cause of aborted connections.</li>\n<li>Jobmaker taking long time might be the cause or just a symptom of this.</li>\n<li>Another possible reason might be the huge number of update rules </li>\n</ul>\n</li>\n</ul>\n<h2 id=\"h_01JAQG6WKNDAMKRQ7WH8SWJK8V\"><strong>4. Check Sporadic Performance issues</strong></h2>\n<ul>\n<li>\n<strong>Symptoms</strong>: Sporadic High system overload (every hour or day, etc...).</li>\n<li>\n<strong>Steps</strong>:\n<ul>\n<li>Investigate the number and frequency of <strong>Group Update Rules</strong> being executed.<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22111655582994\">\n</li>\n<li>Investigate Jobs performance as mentioned above.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"h_01JAQG6WKNP6X8B2NSR9KY2XEV\"> </h4>\n<hr>\n<h1 id=\"h_01JAQG6WKNGDYKZAD2Y2DVK9HV\">Summary:</h1>\n<p>Performance issues in DXI can have a variety of root causes, ranging from long query processing times and group update rules to infrastructure limitations like resource starvation. By systematically checking the key areas mentioned, such as Grafana, AWS logs, and survey execution times via Watchdog, agents can diagnose the core issues and apply appropriate solutions.</p>\n<hr>\n<h2 id=\"h_01JAQG6WKN6SJ0B9GDM0912ZQ9\">FAQ:</h2>\n<h4 id=\"h_01JAQG6WKNSFXMC37D73KX4WFG\">1. <strong>What are common causes of slow performance in DXI?</strong>\n</h4>\n<ul>\n<li>Performance issues can result from long query processing times, a high number of Group Update Rules, resource starvation, or high execution times for certain survey pages.</li>\n</ul>\n<h4 id=\"h_01JAQG6WKN4NCRV58GKCX3V2D6\">2. <strong>How do I know if queries are running too long?</strong>\n</h4>\n<ul>\n<li>Use Watchdog to monitor execution times. Surveys with \"Exec. time\" over 2 seconds are typically considered problematic and should be reviewed.</li>\n</ul>",
    "user_segment_ids": [
        360000084973
    ]
}