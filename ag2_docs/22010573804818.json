{
    "id": 22010573804818,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/22010573804818.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/22010573804818-Accessing-and-Querying-AWS-Cloudwatch-DB-Logs",
    "author_id": 1904316023094,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20234751255186,
    "created_at": "2024-10-16T08:23:24Z",
    "updated_at": "2024-11-12T13:49:42Z",
    "name": "Accessing and Querying AWS Cloudwatch DB Logs",
    "title": "Accessing and Querying AWS Cloudwatch DB Logs",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-11-12T13:49:42Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [
        "Troubleshooting",
        "Cloudwatch",
        "AWS",
        "DB Logs"
    ],
    "body": "<h1 id=\"h_01JAA6TGBXT65QVHSWYDK9NTCN\">Overview</h1>\n<p><span style=\"color: #212529; font-family: -apple-system, BlinkMacSystemFont, ' Segoe UI' , Roboto, ' Helvetica Neue' , Arial, sans-serif, ' Apple Color Emoji' , ' Segoe UI Emoji' , ' Segoe UI Symbol' , ' Noto Color Emoji' font-size:16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: #ffffff; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;\">This article provides guidance on how </span>to access and query AWS Cloudwatch Database (DB) Logs. </p>\n<h1 id=\"h_01JAA6TGBXKT3X6TWB7BVMHNKN\">Solution</h1>\n<ol>\n<li>Access the <strong>AWS account</strong> related to your customer's datacenter as per the <a href=\"https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20434985085586-Discover-XI-DXI-Agent-Access-Guide-WIP\">Access Guide</a>.<br><span style=\"opacity: 1;\"><img id=\"image_1a383911-3516-4006-9756-69309cf378c1\" class=\"image_resized\" style=\"width: 317px;\" src=\"https://central-supportdesk.zendesk.com/attachments/token/Fy5trweb30RMAzlXLdq4kZeJ3/?name=inlineImage.png\"></span>\n</li>\n<li>Search for CloudWatch. If you are dealing with a German datacenter, make sure to select the Frankfurt zone.<br><img id=\"image_f2077bcd-d4a2-49a6-8bc4-c3185b306a50\" src=\"https://central-supportdesk.zendesk.com/attachments/token/mktcfIw4fZz7KEsr3Qt63IVR1/?name=image.png\">\n</li>\n<li>Search for <strong>Cloudwatch</strong> </li>\n<li>Now you can either use <strong>LogGroup</strong> search (which is free), or <strong>LogInsights</strong> (which inquires costs based on data scanned).</li>\n<li>In both cases, you will need to know the <strong>LogGroup</strong>:\n<ul>\n<li>\n<strong>LogGroup </strong>is the category of logs you need to check.</li>\n<li>You will need to get the Database Host from either Service Gateway (<strong>i</strong> command) or <a href=\"https://globis.3uu.de/login.php3\">Globis</a>; then use it to filter the CloudWatch logs.\n<ul>\n<li>For example: <code>prod-de-02-db-07</code>.<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22013372956306\"><br><img id=\"image_f7c25316-9a99-4de0-b240-3ce8a95d8f70\" src=\"https://central-supportdesk.zendesk.com/attachments/token/PscQL2VZVkaU2HKYwUa0opJ2Z/?name=image.png\">\n</li>\n</ul>\n</li>\n<li>Define one or more of the following log groups:</li>\n<li>\n<img id=\"image_6e05a0cf-327d-40b6-b393-413f403dbe9a\" src=\"https://central-supportdesk.zendesk.com/attachments/token/kI5TnjOPhTwwzJzk7KKqVcgvM/?name=image.png\">\n<ol>\n<li>\n<strong>Error</strong>: For DB errors (not PHP errors)</li>\n<li>\n<strong>Slowquery</strong>: Slow query on the DB level, not PHP level (since PHP will send several DB queries in 1 command)</li>\n<li>\n<strong>General</strong>: All queries sent to the DB</li>\n<li>\n<strong>Audit</strong>: Seems not used</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>In both cases, it is recommended to search using the <strong>ConnectionID</strong> if possible:<br>This can be found in different logs, example <code>EFS GUI -&gt; System -&gt; Options -&gt; Platform cockpit -&gt; Admin log</code><br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22013356500242\">\n</li>\n<li>It is recommended to start searching using \"<strong>Log groups</strong>\" at least to define the exact minute having the issue.\n<ul>\n<li>Select the correct <strong>log group</strong>, then select \"<code>Log Streams -&gt; Search All Log Streams</code>\", then search for the target string (recommended to use connection ID)<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22012889188498\">\n</li>\n</ul>\n</li>\n<li>For more advanced queries on the logs, you can use <strong>LogInsights</strong>\n<ul>\n<li>\n<span class=\"wysiwyg-underline\"><strong><span class=\"wysiwyg-color-red\">Important (Cost implications)</span>:</strong> </span>Make sure to specify a narrow time filter (<strong>up to 1 minute</strong>) if querying the <strong>general</strong> log group, since log insights inquire costs based on scanned records. So even if your query returns 1 record, the cost is based on <strong>records scanned </strong>(based on time filter), not the records returned.</li>\n<li>Since<code>Error</code> loggroup is already small, so you can specify a larger time filter.</li>\n<li>Set your <strong>Query filters</strong>:</li>\n<li><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22012856120722\"></li>\n</ul>\n</li>\n</ol>\n<h1 id=\"h_01JAAEY10EX7K0F91DCBV5CGC8\">Useful Log Queries</h1>\n<h2 id=\"h_01JAAEY10EJEV935RGPXW3THD8\">1. Monitor JobMaker progress for an installation</h2>\n<p><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22015828623122\"></p>\n<p> </p>\n<h2 id=\"h_01JAN59M52T72NERA01VW3V8Q2\">2. DB Connections completed normally:</h2>\n<ul>\n<li>In case a DB connection is completed normally, the connectionID should have a Quit entry by the end of the transaction:<br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22091767681554\">\n</li>\n<li>If the Quit is not there, this might indicate an Error on the DB level (check error log group), or an error from PHP side not closing the connection appropriately.</li>\n</ul>\n<h2 id=\"01JCG9JXDNCFNS692TPM6Z062J\">3. DB Profiling to get GUI DB query:</h2>\n<ul>\n<li>In case you need to extract data from the DB, which is accessible from the admin GUI, you can use this method to detect the query used by GUI:\n<ul>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Reload the page on EFS Admin GUI having the requested data. </li>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Go to <code>Options &gt; Platform Cockpit &gt; Admin Log &gt; Advanced search</code> and click Search</li>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Look for the connectionID related to that reload action <br><img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/22013356500242\">\n</li>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Look in AWS logs (General Loggroup) for that connection ID</li>\n<li style=\"line-height: inherit; margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; background: transparent; box-sizing: border-box; list-style: initial;\">Go through the queries in AWS to find the query which gets your info</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"h_01JAA6TGBXHZFRQC0YH5AVADP9\">Summary</h1>\n<p>This guide provides a step-by-step process to access and filter AWS Cloudwatch DB Logs. By following these steps, users should be able to effectively troubleshoot and analyze their database logs.</p>\n<h2 id=\"h_01JAA6TGBXJFDJS33MD5NB47HG\">FAQ</h2>\n<ol>\n<li>\n<strong>What is the LogGroup in AWS Cloudwatch?</strong><br>LogGroup is the category of logs you need to check in AWS Cloudwatch.</li>\n<li>\n<strong>What are the different filters I can use in AWS Cloudwatch?</strong><br>You can use 'Error' for DB errors, 'Slowquery' for slow queries on the DB level, and 'general' for all queries sent to the DB.</li>\n</ol>",
    "user_segment_ids": [
        360000084973
    ]
}