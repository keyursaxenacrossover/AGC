{
    "id": 20716926867858,
    "url": "https://discoverxi-supportdesk.zendesk.com/api/v2/help_center/en-us/articles/20716926867858.json",
    "html_url": "https://discoverxi-supportdesk.zendesk.com/hc/en-us/articles/20716926867858-SAML-Provider-Setup",
    "author_id": 369584192734,
    "comments_disabled": false,
    "draft": false,
    "promoted": false,
    "position": 0,
    "vote_sum": 0,
    "vote_count": 0,
    "section_id": 20714711445138,
    "created_at": "2024-08-12T19:54:09Z",
    "updated_at": "2024-08-28T08:27:07Z",
    "name": "SAML Provider Setup",
    "title": "SAML Provider Setup",
    "source_locale": "en-us",
    "locale": "en-us",
    "outdated": false,
    "outdated_locales": [],
    "edited_at": "2024-08-28T08:27:03Z",
    "user_segment_id": 360000084973,
    "permission_group_id": 1075294,
    "content_tag_ids": [],
    "label_names": [],
    "body": "<h1 id=\"h_01J6C0MX5MPRBBS2HQCV5DP2XJ\">Overview</h1>\n<p>This article provides a step-by-step guide for setting up a SAML 2.0 Identity Provider (IdP) in Okta. The process involves gathering client metadata, configuring the IdP in Okta, and sending metadata to the client. This setup is more complex than OpenID Connect due to the variability in how information is required and configured.</p>\n<ul>\n<li><a href=\"#header-1\">Requirements</a></li>\n<li><a href=\"#header-3\">Process</a></li>\n<li><a href=\"#header-5\">Client Metadata available</a></li>\n<li><a href=\"#header-6\">Client Metadata not available</a></li>\n<li><a href=\"#header-7\">Setup the Identity Provider</a></li>\n<li><a href=\"#header-12\">Send Over Metadata</a></li>\n<li><a href=\"#header-14\">Update the Identity Provider</a></li>\n</ul>\n<p>The SAML 2.0 is more complex than the OpenID Connect setup as it is less strict on how the setup can be done and what information is required.</p>\n<p>Before the setup can be completed in Okta the following information must be gathered / the following things need to be done:</p>\n<h2 id=\"header-1\">Requirements</h2>\n<div class=\"expand-macro\">\n<ul>\n<li>\n<p>The <strong>client has to provide the Metadata</strong> for the Identity Provider in the form of</p>\n<ul>\n<li>\n<p>an XML file provided via mail or another medium</p>\n</li>\n<li>\n<p>a link containing the metadata XML</p>\n</li>\n</ul>\n</li>\n<li>\n<p>The client has to be informed that we expect the following information in the SAML assertion (response)</p>\n<ul>\n<li>\n<p><strong>required attributes</strong></p>\n<ul>\n<li>\n<p>firstName</p>\n</li>\n<li>\n<p>lastName</p>\n</li>\n<li>\n<p>email</p>\n</li>\n</ul>\n</li>\n<li>\n<p>the <strong>subjectNameId</strong> (or nameId) <strong>must be the email</strong> address of the user</p>\n</li>\n</ul>\n</li>\n<li>\n<p>The client has to define the following</p>\n<ul>\n<li>\n<p>What part of the SAML response is digitally signed:</p>\n<ul>\n<li>\n<p>Assertion</p>\n</li>\n<li>\n<p>Response</p>\n</li>\n<li>\n<p>Both</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Is the assertion encrypted ?</p>\n</li>\n</ul>\n</li>\n<li>\n<p>In oder to route users to the correct Identity Provider <strong>we need to know the used email domains</strong> of the client (later used/configured in routing rules in Okta)</p>\n<ul>\n<li>\n<p>E.g: The client is using the domain <code>coca-cola.com</code> for all of its users</p>\n</li>\n</ul>\n</li>\n</ul>\n<p> </p>\n</div>\n<h2 id=\"header-3\">Process</h2>\n<p>During a SAML 2.0 <strong>it does not matter who sends over the metadata first</strong>. Normally a “dummy” application/Identity Provider is created to generate the metadata file. This file will contain all necessary information, even if not all values are final.</p>\n<p>Depending on the information available:</p>\n<h3 id=\"header-5\">Client Metadata available</h3>\n<ul>\n<li>\n<p><a href=\"https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/1223852069/SAML+Provider+Setup+-+Prerequisites#Setup-the-Identity-Provider\">Setup the Identity Provider</a></p>\n</li>\n<li>\n<p><a href=\"https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/1223852069/SAML+Provider+Setup+-+Prerequisites#Send-Over-Metadata\">Send over metadata</a></p>\n</li>\n<li>\n<p>Configure Routing Rules</p>\n</li>\n<li>\n<p>Configure Profile Mapping</p>\n</li>\n</ul>\n<p> </p>\n<h3 id=\"header-6\">Client Metadata not available</h3>\n<ul>\n<li>\n<p>Setup a “dummy” Identity Provider in Okta to generate the Metadata</p>\n</li>\n<li>\n<p><a href=\"https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/1223852069/SAML+Provider+Setup+-+Prerequisites#Send-Over-Metadata\">Send over metadata</a></p>\n<ul>\n<li>\n<p>Wait for the client Metadata response</p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://qbdocs.atlassian.net/wiki/spaces/IAM/pages/1223852069/SAML+Provider+Setup+-+Prerequisites#Update-the-Identity-Provider\">Update the Identity Provider</a></p>\n</li>\n<li>\n<p>Configure Routing Rules</p>\n</li>\n<li>\n<p>Configure Profile Mapping</p>\n</li>\n</ul>\n<h2 id=\"header-7\">Setup the Identity Provider</h2>\n<div class=\"expand-macro\">\n<h3 id=\"header-8\">Step 1: Navigate to Identity Providers</h3>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716883649938\" alt=\"Screenshot_2019-12-11 Questback - Dashboard.png\">\n<p> </p>\n<h3 id=\"header-9\">Step 2: Add a new SAML Identity Provider</h3>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716893860754\" alt=\"Screenshot_2019-12-11 Questback - Identity Providers.png\">\n<p> </p>\n<h3 id=\"header-10\">Step 3: Provide Okta specific information</h3>\n<p><strong>Values:</strong></p>\n<p>Name: see Naming conventions in Okta</p>\n<p><strong>IdP Username</strong>: Usually that should always be “idpuser.subjectNameId”. To prevent unexpected cases simply lowercase this value. <strong>Input</strong>: <code>String.toLowerCase(idpuser.subjectNameId)</code></p>\n<p><strong>Match against</strong>: <code>Okta Username</code></p>\n<p><strong>If no match is found</strong>: Select JIT provisioning</p>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716887021074\" alt=\"Bildschirmfoto 2019-12-11 um 16.31.00.png\">\n<p> </p>\n<h3 id=\"header-11\">Step 4: Provide JIT information and SAML settings</h3>\n<p><strong>Values:</strong></p>\n<p><strong>Group Assignment</strong>: Assign to specific groups</p>\n<p><strong>Specific Groups</strong>: The group of the company the user belongs to - This was set up during the tenant setup</p>\n<p><strong>IdP Issuer URI</strong>:</p>\n<ul>\n<li>\n<p>in Metadata: look for the entityID (first line) and add the value <code>entityID=”some-value”</code></p>\n</li>\n<li>\n<p>In case this is not present put a dummy in there and correct later</p>\n</li>\n</ul>\n<p><strong>IdP Single Sign-On URL</strong>:</p>\n<ul>\n<li>\n<p>In Metadata: look for a node <code>md:SingleSignOnService</code> (if multiple are present, select the one for <code>HTTP-POST</code>) and copy the URL in the attribute <code>Location=\"https://some-url.com/sso\"</code></p>\n</li>\n<li>\n<p>In case this is not present put a dummy in there and correct later</p>\n</li>\n</ul>\n<p><strong>Idp Signature Certificate</strong>:</p>\n<ul>\n<li>\n<p>In Metadata: look for the <code>X509Certificate</code> with the <code>use=\"signing”</code> (in the KeyDescriptor tag), copy the value and save it as a certificate to your computer. Then upload it.</p>\n</li>\n<li>\n<p>Store the certificate file in keypass as attachement of the entry for the installation!</p>\n<ul>\n<li>\n<p>For formatting the certificate tools like <code>https://www.samltool.com/format_x509cert.php</code> can be used</p>\n</li>\n</ul>\n</li>\n<li>\n<p>In case this is not present put a dummy certificate in there and correct later</p>\n<ul>\n<li>\n<p>the dummy certificate can be created here: <a href=\"https://www.samltool.com/self_signed_certs.php\">https://www.samltool.com/self_signed_certs.php</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p>The dummy certificate can be a any self-signed certificate</p>\n</li>\n</ul>\n<p> </p>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716894001426\" alt=\"Screenshot_2019-12-11 Questback - Identity Providers_123.png\">\n<p><strong>Advanced Settings:</strong></p>\n<p><strong>Request Binding</strong>: HTTP POST is preferred, if not available use HTTP REDIRECT instead. The available options can be seen in the Metadata, depending on what <code>md:SingleSignOnService</code> options are available</p>\n<p><strong>Request Signature</strong>: This can be found in the Metadata: <code>WantAuthnRequestsSigned=\"true/false\"</code>. If not explicitly set, do not sign Request</p>\n<p><strong>Request Signature Verification</strong>: This is depending on what the client answers in the first mail, wether they want to sign the assertion, the response or both. Select the matching value (“Response or Assertion” if unknown or both are signed)</p>\n<p><strong>Okta Assertion Consumer Service URL: </strong>Trust-specific</p>\n<p><strong>Destination</strong>: Leave it empty</p>\n<p><strong>Update attributes for existing users: </strong>has to be switched <strong>off</strong></p>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716894060818\" alt=\"Screenshot_2019-12-11 Questback - Identity Providers(3).png\">\n<p> </p>\n</div>\n<h2 id=\"header-12\">Send Over Metadata</h2>\n<div class=\"expand-macro\">\n<h3 id=\"header-13\">Step 1: Provide Metadata to the client</h3>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716917563154\" alt=\"Screenshot_2019-12-11 Questback - Identity Providers_456.png\">\n<p> </p>\n<p>After the metadata is downloaded it can be attached to a mail</p>\n</div>\n<h3 id=\"h_01J6C1GK5XYNCX7W91NAVPC69B\"> </h3>\n<h2 id=\"header-14\">Update the Identity Provider</h2>\n<div class=\"expand-macro\">\n<h3 id=\"header-15\">Step 1: Click on Configure Identity Provider</h3>\n<img src=\"https://discoverxi-supportdesk.zendesk.com/hc/article_attachments/20716927303954\" alt=\"Screenshot_2019-12-11 Questback - Identity Providers(4).png\">\n<h3 id=\"header-16\">\n<strong>Step 2</strong>: Follow Step 3 + 4 from the section “Setup the Identity Provider”</h3>\n</div>",
    "user_segment_ids": [
        360000084973
    ]
}